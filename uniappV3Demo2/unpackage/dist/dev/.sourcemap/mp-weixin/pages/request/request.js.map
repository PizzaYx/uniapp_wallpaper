{"version":3,"file":"request.js","sources":["pages/request/request.vue","pages/request/request.vue?type=page"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"menu\">\r\n\t\t\t<uni-segmented-control :current=\"current\" :values=\"values\" @clickItem=\"onClickItem\" styleType=\"button\"\r\n\t\t\t\tactiveColor=\"#2d7cdc\"></uni-segmented-control>\r\n\t\t</view>\r\n\t\t<view class=\"layout\">\r\n\t\t\t<view class=\"box\" v-for=\"(item,index) in pets\" :key=\"item._id\">\r\n\t\t\t\t<view class=\"pic\">\r\n\t\t\t\t\t<image lazy-load :src=\"item.url\" mode=\"widthFix\" @click=\"onPreview(index)\">\r\n\t\t\t\t\t</image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"text\">{{item.content}}</view>\r\n\t\t\t\t<view class=\"author\">----- {{item.author}}</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"float\">\r\n\t\t\t<view class=\"item\" @click=\"onRefresh\">\r\n\t\t\t\t<uni-icons type=\"refreshempty\" size=\"26\" color=\"#888\"></uni-icons>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"item\" @click=\"onTop\">\r\n\t\t\t\t<uni-icons type=\"arrow-up\" size=\"26\" color=\"#888\"></uni-icons>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"loadMore\">\r\n\t\t\t<uni-load-more status=\"loading\"></uni-load-more>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tcomputed,\n\t\tref\r\n\t} from 'vue';\r\n\r\n\timport {\r\n\t\tonReachBottom,\r\n\t\tonPullDownRefresh\r\n\t} from \"@dcloudio/uni-app\"\r\n\r\n\r\n\tconst pets = ref([]);\r\n\r\n\tconst current = ref(0);\n\t\n\tconst classify = [{key:\"all\",value:\"全部\"},{key:\"dog\",value:\"狗\"},{key:\"cat\",value:\"猫\"}];\n\t\n\tconst values = computed(()=>classify.map(item=>item.value))\r\n\r\n\t//点击菜单\r\n\tfunction onClickItem(e) {\r\n\t\tcurrent.value = e.currentIndex;\n\t\tpets.value = [];\n\t\tnetwork();\r\n\t}\r\n\r\n\t//点击刷新\r\n\tfunction onRefresh() {\r\n\t\tuni.startPullDownRefresh();\r\n\t}\r\n\t//回到顶部\r\n\tfunction onTop() {\r\n\t\tuni.pageScrollTo({\r\n\t\t\tscrollTop: 0,\r\n\t\t\tduration: 100\r\n\t\t})\r\n\t}\r\n\r\n\r\n\t//预览图片\r\n\tfunction onPreview(index) {\r\n\t\tlet urls = pets.value.map(item => item.url);\r\n\t\tuni.previewImage({\r\n\t\t\tcurrent: index,\r\n\t\t\turls: urls\r\n\t\t})\r\n\t}\r\n\t//网络请求\r\n\tfunction network() {\r\n\t\tuni.showNavigationBarLoading();\r\n\t\tuni.request({\r\n\t\t\turl: \"https://tea.qingnian8.com/tools/petShow\",\r\n\t\t\tdata: {\r\n\t\t\t\tsize: 5,\r\n\t\t\t\ttpe: classify[current.value].key\r\n\t\t\t},\r\n\t\t\tmethod: 'GET',\r\n\t\t\theader: {\r\n\t\t\t\t\"access-Key\": \"yx963852741\"\r\n\t\t\t}\r\n\t\t}).then(res => {\r\n\t\t\tif (res.data.errCode === 0) {\r\n\t\t\t\tpets.value = [...pets.value, ...res.data.data];\r\n\t\t\t\tconsole.log(pets.value);\r\n\t\t\t} else if (res.data.errCode === 400) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: res.data.errMsg,\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\tduration: 2000\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}).catch(err => {\r\n\t\t\tconsole.log(err);\r\n\t\t}).finally(() => {\r\n\t\t\tuni.stopPullDownRefresh()\n\t\t\tuni.hideNavigationBarLoading()\r\n\t\t})\r\n\t}\r\n\r\n\t//触底加载更多\r\n\tonReachBottom(() => {\r\n\t\tnetwork();\r\n\t})\r\n\t//下拉刷新\r\n\tonPullDownRefresh(() => {\r\n\t\tpets.value = [];\n\t\tcurrent.value = 0;\r\n\t\tnetwork();\r\n\t})\r\n\r\n\r\n\r\n\tnetwork();\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.container {\r\n\t\t.menu {\r\n\t\t\tpadding: 50rpx 50rpx 0;\r\n\t\t}\r\n\r\n\t\t.layout {\r\n\t\t\tpadding: 50rpx;\r\n\r\n\t\t\t.box {\r\n\t\t\t\tmargin-bottom: 60rpx;\r\n\t\t\t\tbox-shadow: 0 10rpx 40rpx rgba(0, 0, 0, 0.1);\r\n\t\t\t\tborder-radius: 20rpx;\r\n\t\t\t\toverflow: hidden;\r\n\r\n\t\t\t\t.pic {\r\n\t\t\t\t\twidth: 100%;\r\n\r\n\t\t\t\t\timage {\r\n\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.text {\r\n\t\t\t\t\tpadding: 30rpx;\r\n\t\t\t\t\tcolor: #333;\r\n\t\t\t\t\tfont-size: 36rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.author {\r\n\t\t\t\t\tpadding: 0 30rpx 30rpx;\r\n\t\t\t\t\ttext-align: right;\r\n\t\t\t\t\tcolor: #888;\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.float {\r\n\t\t\tposition: fixed;\r\n\t\t\tright: 30rpx;\r\n\t\t\tbottom: 80rpx;\r\n\t\t\tpadding-bottom: env(safe-area-inset-bottom);\r\n\r\n\t\t\t.item {\r\n\t\t\t\twidth: 90rpx;\r\n\t\t\t\theight: 90rpx;\r\n\t\t\t\tbackground: rgba(255, 255, 255, 0.9);\r\n\t\t\t\tborder-radius: 50%;\r\n\t\t\t\tmargin-bottom: 20rpx;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\tbox-shadow: 1px solid #eee;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.loadMore {\r\n\t\t\tpadding-bottom: calc(env(safe-area-inset-bottom) + 50);\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from '/Users/yx/Documents/Vue3Projects/uniapp_wallpaper/uniappV3Demo2/pages/request/request.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","uni","onReachBottom","onPullDownRefresh"],"mappings":";;;;;;;;;;;;;;;;;AA0CC,UAAM,OAAOA,kBAAI,CAAA,CAAE;AAEnB,UAAM,UAAUA,kBAAI,CAAC;AAErB,UAAM,WAAW,CAAC,EAAC,KAAI,OAAM,OAAM,KAAI,GAAE,EAAC,KAAI,OAAM,OAAM,IAAG,GAAE,EAAC,KAAI,OAAM,OAAM,IAAG,CAAC;AAEpF,UAAM,SAASC,cAAQ,SAAC,MAAI,SAAS,IAAI,UAAM,KAAK,KAAK,CAAC;AAG1D,aAAS,YAAY,GAAG;AACvB,cAAQ,QAAQ,EAAE;AAClB,WAAK,QAAQ;AACb;IACA;AAGD,aAAS,YAAY;AACpBC,oBAAG,MAAC,qBAAoB;AAAA,IACxB;AAED,aAAS,QAAQ;AAChBA,oBAAAA,MAAI,aAAa;AAAA,QAChB,WAAW;AAAA,QACX,UAAU;AAAA,MACb,CAAG;AAAA,IACD;AAID,aAAS,UAAU,OAAO;AACzB,UAAI,OAAO,KAAK,MAAM,IAAI,UAAQ,KAAK,GAAG;AAC1CA,oBAAAA,MAAI,aAAa;AAAA,QAChB,SAAS;AAAA,QACT;AAAA,MACH,CAAG;AAAA,IACD;AAED,aAAS,UAAU;AAClBA,oBAAG,MAAC,yBAAwB;AAC5BA,oBAAAA,MAAI,QAAQ;AAAA,QACX,KAAK;AAAA,QACL,MAAM;AAAA,UACL,MAAM;AAAA,UACN,KAAK,SAAS,QAAQ,KAAK,EAAE;AAAA,QAC7B;AAAA,QACD,QAAQ;AAAA,QACR,QAAQ;AAAA,UACP,cAAc;AAAA,QACd;AAAA,MACJ,CAAG,EAAE,KAAK,SAAO;AACd,YAAI,IAAI,KAAK,YAAY,GAAG;AAC3B,eAAK,QAAQ,CAAC,GAAG,KAAK,OAAO,GAAG,IAAI,KAAK,IAAI;AAC7CA,wBAAY,MAAA,MAAA,OAAA,mCAAA,KAAK,KAAK;AAAA,QACtB,WAAU,IAAI,KAAK,YAAY,KAAK;AACpCA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO,IAAI,KAAK;AAAA,YAChB,MAAM;AAAA,YACN,UAAU;AAAA,UACf,CAAK;AAAA,QACD;AAAA,MACJ,CAAG,EAAE,MAAM,SAAO;AACfA,sBAAAA,MAAY,MAAA,OAAA,oCAAA,GAAG;AAAA,MAClB,CAAG,EAAE,QAAQ,MAAM;AAChBA,sBAAAA,MAAI,oBAAqB;AACzBA,sBAAAA,MAAI,yBAA0B;AAAA,MACjC,CAAG;AAAA,IACD;AAGDC,kBAAAA,cAAc,MAAM;AACnB;IACF,CAAE;AAEDC,kBAAAA,kBAAkB,MAAM;AACvB,WAAK,QAAQ;AACb,cAAQ,QAAQ;AAChB;IACF,CAAE;AAID;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1HD,GAAG,WAAW,eAAe;"}